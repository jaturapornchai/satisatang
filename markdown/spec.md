# สติสตางค์ 
- ระบบ สติสตางค์ ออกแบบมาเพื่อเก็บข้อมูลการเงินส่วนบุคคล จัดการรายรับ รายจ่ายประจำวัน

## คุณสมบัติระบบ
- เชื่อมต่อกับ Line OA เพื่อรับข้อมูล
- รับเป็นภาพ แล้วให้ Gemini แปลงเป็น json
- ถามได้ เช่น เงินเหลือเท่าไหร่ แล้ว ai ไปสร้าง query หลายๆ ชุด แล้ว ค้นหาแบบ vector search หรือ sum เพื่อประหยัด token เสร็จแล้วจะเอาผลลัพธ์ พร้อมคำถาม ส่งไปให้ ai เพื่อสร้างคำตอบเป็น flex message แล้ว ตอบกลับไป
- รูปภาพให้เก็บไว้ใน mongodb ในรูปแบบ base64


## Prompt
- ระบบนี้เป็นระบบการเงินรับจ่ายส่วนบุคคล 
- รับข้อความแล้วแปลง เพื่อลงบัญชี ว่าเป็นรายได้ หรือรายจ่าย
- รับรูปภาพแล้วให้ Gemini แปลง เพื่อลงบัญชี ว่าเป็นรายได้ หรือรายจ่าย
- reply กลับเป็น flex message เข้าใจง่าย สวยงาม
- ตอบกลับ ให้เพิ่ม ปุ่ม ว่า บันทึก แก้ไข ลบ

## Flow
- เมื่อมีข้อความมา ให้ ai แยกประเภทการทำงาน ว่าเป็น คำถาม หรือ รูปภาพ หรือ ข้อความ เกี่ยวกับอะไรบ้าง เพราะ work flow แต่ระงานไม่เหมือนกัน

### ถ้าถ่ายรูป SLIP เกี่ยวกับธนาคาร
- ถ้ามีการส่ง Slip เกี่ยวกับการโอนเงิน ส่งให้ ai return เป็น json แล้วให้แสดงผลการอ่านเป็น flex message แล้วให้ถามด้วย ว่า เป็น รายได้ หรือ รายจ่าย และเป็นค่าอะไร ให้อ่าน SLIP ให้ละเอียดด้วย ผู้โอน ผู้รับโอน จำนวนเงิน วันที่ แล้วให้ AI แปลงเป็น json เก็บไว้ แล้วค่อยบันทึกบัญชี่ และแสดงยอดสรุป
- วันที่เวลา ให้แปลงเป็น ค.ศ. เพราะบางครั้งวันที่เป็น ไทยบ้าง ตัวย่อบ้าง ให้วิเคราะห์ดีๆ
- ให้มีชื่อธนาคาร พร้อมเลขที่บัญชีด้วย (ดูจาก logo หรือ ชื่อธนาคาร)
- ถ้าผู้โอนเป็นเรา ให้แนะนำว่า น่าจะเป็นรายจ่าย ถ้าไม่ใช่เรา ให้แนะนำว่า น่าจะเป็นรายได้
- บอกให้ชัดเจนด้วยว่า รอบันทึกบัญชี
- บอกด้วยว่า บันทึกบัญชีแล้ว เมื่อ มีการเลือกรายรับ หรือ รายจ่าย และมีการบอกว่า เป็น รายได้จากอะไร หรือจ่ายค่าอะไร ครบถ้วนแล้ว

### ถ้าถ่ายรูป เอกสารอื่นๆ
- ให้ AI แปลงเป็น json เก็บไว้ แล้วค่อยบันทึกบัญชี่ และแสดงยอดสรุป ต้องถามด้วยว่าเป็น รายได้ หรือ รายจ่าย และเป็นค่าอะไร

### ถ้าเป็นข้อความ
- ให้ AI แปลงเป็น json เก็บไว้ แล้วค่อยบันทึกบัญชี่ และแสดงยอดสรุป ต้องถามด้วยว่าเป็น รายได้ หรือ รายจ่าย และเป็นค่าอะไร

### ถ้าเป็นคำถาม
- ให้ ai วิเคราะห์จากข้อมูลที่ query มาแล้วให้ตอบกลับเป็น flex message 
